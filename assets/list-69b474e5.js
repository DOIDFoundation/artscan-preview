import{w as ue,Z as te,a as ie,b as ge,c as ye,T as f,d as se,i as fe,N as we,e as Q,u as U,f as $e,s as oe,h as A,j as q,k as W,D as ve,g as be,n as xe}from"./index-d46178d7.js";import{y as n,m as l,e as w,j as N,u as k,k as T,n as m,q as E,l as p,A as _e,w as ae,d as Te}from"./vendor-d3dde260.js";const Oe=e=>{const{id:t,tokenURI:s}=e,[o,i]=t?t.toString().split("-"):[e.contract.id,e.tokenID];return{address:o,tokenID:i,ctime:e.createdAt*1e3,tokenURI:s}},De=e=>{const t=Oe(e),{owner:{id:s="",doids:o=[]}={}}=e;return Object.assign(t,{owner:s,doids:o.map(i=>({...i,name:ue(i.name)}))})},nt=async e=>{const t=e.toLowerCase();let s=0,o=0;if(e!=te){const i=await ie("scan",`{
        doids(where:{address:"${t}"}){address {id totalTokensMinted totalTokenHolders}}
      }`),{address:{totalTokenHolders:a,totalTokensMinted:r}}=i.doids[0]||{};s=a,o=r}return{ownerNum:s,mintNum:o}},re=async(e,t={pageSize:5,page:1})=>{let{minter:s,doid:o,tokenID:i}=e;if(!s||s==te)return[];s=s.toLowerCase();const{tokens:a=[]}=await ie("scan",`{tokens(${ge(t)} where:{${ye({minter:s,tokenID:i})}} orderBy:createdAt orderDirection:desc){
        id tokenURI createdAt owner { id doids { name }
      }}}`)||{};return a.map(r=>Object.assign(De(r),{minter:s,doid:o}))},lt=async e=>(await re(e))[0];var Pe=Object.defineProperty,Se=Object.getOwnPropertyDescriptor,ne=(e,t,s,o)=>{for(var i=o>1?void 0:o?Se(t,s):t,a=e.length-1,r;a>=0;a--)(r=e[a])&&(i=(o?r(t,s,i):r(i))||i);return o&&i&&Pe(t,s,i),i};let H=class extends f(""){constructor(){super(...arguments),this.type="inline"}render(){switch(this.type){case"block":return n`<div class="block mx-auto my-8 text-center text-xl"><i class="mdi mdi-loading mx-1"></i></div>`;default:return n`<i class="mdi mdi-loading mr-1"></i> Loading...`}}};ne([l({type:String})],H.prototype,"type",2);H=ne([w("loading-icon")],H);const F=(e,{persistent:t=!1,rootMargin:s="0px"}={})=>class extends e{constructor(){super(...arguments),this.onObserved=()=>{},this.unobserve=()=>{var o;return this.observe$&&((o=this.observer)==null?void 0:o.unobserve(this.observe$))},this.observe=()=>{this.observer||(this.observe$||(this.observe$=this.$(":first-child")))&&(this.observer=new IntersectionObserver(o=>{o[0].intersectionRatio<=0||(this.onObserved(),t||this.unobserve())},{rootMargin:s}),this.observer.observe(this.observe$))}}firstUpdated(){this.observe()}connectedCallback(){this.unobserve(),super.connectedCallback()}};var _=(e=>(e.audio="audio",e.image="image",e.threed="threed",e.video="video",e))(_||{});const G=[{ext:"gif",mediaType:"image",mimeType:"image/gif"},{ext:"jpg",mediaType:"image",mimeType:"image/jpeg"},{ext:"jpeg",mediaType:"image",mimeType:"image/jpeg"},{ext:"png",mediaType:"image",mimeType:"image/png"},{ext:"svg",mediaType:"image",mimeType:"image/svg+xml"},{ext:"webp",mediaType:"image",mimeType:"image/webp"}];G.map(e=>e.ext);G.map(e=>e.mimeType);const J=[{ext:"mp4",mediaType:"video",mimeType:"video/mp4"},{ext:"webm",mediaType:"video",mimeType:"video/webm"}];J.map(e=>e.ext);J.map(e=>e.mimeType);const K=[{ext:"gltf",mediaType:"threed",mimeType:"model/gltf-binary"},{ext:"glb",mediaType:"threed",mimeType:"model/gltf-binary"}];K.map(e=>e.ext);K.map(e=>e.mimeType);const X=[{ext:"mp3",mediaType:"audio",mimeType:"audio/mpeg"},{ext:"ogg",mediaType:"audio",mimeType:"audio/ogg"},{ext:"wav",mediaType:"audio",mimeType:"audio/wav"}];X.map(e=>e.ext);X.map(e=>e.mimeType);const le=[...G,...J,...X,...K],ke=(e="")=>{const t=se(e);return t?Ce(t,"ext"):pe(fe(e))},pe=e=>{var t;return(t=le.find(s=>s.mimeType===e))==null?void 0:t.mediaType},Ce=(e,t)=>{var s;return(s=le.find(o=>o[t]===e))==null?void 0:s.mediaType},ce=async e=>{const{headers:t}=await fetch(e,{method:"HEAD"}),s=t.get("content-type");if(s)return pe(s)},je=async e=>{let t;return se(e)&&(t=ke(e)),t||(t=await ce(e)),t},Le={url:{"0x1":"https://opensea.io/assets/ethereum","0xaa36a7":"https://testnets.opensea.io/assets/sepolia","0x5":"https://testnets.opensea.io/assets/goerli"},api:{"0x1":"https://api.opensea.io/api/v1/asset","0xaa36a7":"https://testnets-api.opensea.io/api/v1/asset","0x5":"https://testnets-api.opensea.io/api/v1/asset"}},ze=e=>Le[e][we.chainId],V=async e=>{var M;const{background_color:t,owner:s="",external_link:o="",asset_contract:i,collection:a}=e,r=e.name||(a==null?void 0:a.name),I=e.image_preview_url||e.image_thumbnail_url||e.image_url||e.image||e.image_original_url||"",c=e.animation_url||e.animation_original_url||I;let d=await ce(c);return{name:r,description:e.description||(a==null?void 0:a.description),image:q(I),raw:q(c),creator:(M=e.creator)==null?void 0:M.address,owner:s,external_link:o,background_color:t,mediaType:d}},B={store:sessionStorage,withoutEnv:!0,ttl:864e5};let S=0;const Z=async(e,t=1024)=>{let s={};if(S)return await oe(50),await Z(e);S=W();try{s=await A.get(e),setTimeout(()=>{S=0},Math.max(W()-S,t))}catch(o){S=0}return s},de=async({address:e="",tokenID:t=""}={},s=!0)=>{let o;const i=await U(`meta.${e}.${t}`,B);if(o=await i.get(),!o)try{const a=`${ze("api")}/${e}/${t}/`;o=await V(await Z(a)),o.name&&o.image?i.set(o):o.image||(await Z(`${a}?force_update=true`),s&&(await oe(1e4),o=await de({address:e,tokenID:t},!1)))}catch(a){}return o!=null?o:{}},ee=async(e="")=>{let t;if(!e)return{};Q(e)&&(t=await V(await A.get(e)));const s=await U(`meta.${e}`,B);if(t||(t=await s.get()),!t)try{t=await V(await A.get(q(e))),t.name&&t.image&&s.set(t)}catch(o){}return t!=null?t:{}},Ie=async e=>{let t;const{tokenURI:s,address:o,tokenID:i}=e;return Q(s)&&(t=await ee(s)),!t&&s&&(t=await(await U(`meta.${s}`,B)).get()),t||(t=await(await U(`meta.${o}.${i}`,B)).get()),!t&&o&&i&&(t=await de(e)),!t&&s&&(t=await ee(s)),t&&(e.meta=t,$e(e)),t!=null?t:{}},Me=async(e,{maxW:t=400}={})=>new Promise(s=>{if(!e)return s("");const o=sessionStorage.getItem(`blob.${e}`);if(o)return s(o);const i=new Image;i.src=e,i.crossOrigin="anonymous",i.onload=async()=>{let[c,d]=[i.width,i.height],[Y,M,he,me]=[0,0,c,d];c>t&&(d=t*(d/c),c=t),d>t&&(c=t*(c/d),d=t),i.height/i.width,a.width=c,a.height=d,r.drawImage(i,Y,M,he,me,0,0,c,d),I()};const a=document.createElement("canvas"),r=a.getContext("2d"),I=()=>{a.toBlob(c=>{const d=URL.createObjectURL(c);sessionStorage.setItem(`blob.${e}`,d),s(d)},"image/png",1)}}),Ue=`i{position:relative;display:inline-flex;height:100%;width:100%;align-items:center;justify-content:center;overflow:hidden}i.empty,i.err,i:not(.loaded){background:linear-gradient(-45deg,rgba(238,201,121) 8%,rgb(187,131,68) 36%,rgba(238,201,121) 66%) 0% 0% / 2400px;animation:silk 4s linear infinite}i.err img{visibility:hidden}i img{height:auto;max-height:100%;width:auto;max-width:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;-o-object-fit:contain;object-fit:contain}@keyframes silk{0%{background-position:-2400px 0}to{background-position:2400px 0}}
`;var Be=Object.defineProperty,Ne=Object.getOwnPropertyDescriptor,u=(e,t,s,o)=>{for(var i=o>1?void 0:o?Ne(t,s):t,a=e.length-1,r;a>=0;a--)(r=e[a])&&(i=(o?r(t,s,i):r(i))||i);return o&&i&&Be(t,s,i),i};const Re=[48,64,128,256,384,512,640,750,828,1080,1200,1920,2048,3840];let h=class extends F(f(Ue)){constructor(){super(...arguments),this.el$=N(),this.loaded=!1,this.stop=!1,this.loading="eager",this.sizes=void 0,this.w="100%",this.firstLoaded=this.loaded,this.imgLoaded=this.loaded,this.err=!1,this.show=!1,this.blobSrc="",this.onLoad=()=>{this.emit("loaded",this.imgLoaded=this.firstLoaded=!0)},this.onError=()=>{this.err=!1},this.onObserved=()=>{var e,t;this.w=((t=(e=this.el$.value)==null?void 0:e.getBoundingClientRect().width)!=null?t:"400")+"",this.show=!0}}get lazy(){return this.loading==="lazy"}get isInstantSrc(){return Q(this.src)}get isResizableSrc(){return this.src&&/\?(w|width)=/.test(this.src)}get requireComporess(){return!this.isResizableSrc&&!this.isInstantSrc&&!this.blobSrc}get uri(){if(!(this.err||!this.show))return this.requireComporess?this.blobSrc:this.src}get empty(){return!(this.src||this.blobSrc)||!(this.uri||this.uriset)}get uriset(){if(!this.src||this.err||!this.show||!this.isResizableSrc)return;const{origin:e,pathname:t}=new URL(this.src);return Re.map(s=>`${[e+t]}?auto=format&w=${s}&width=${s} ${s}w`).join(",")}get autoSizes(){return this.sizes?this.sizes:`(max-width: 768px) ${this.w}px, ${this.w}px`}shouldUpdate(e){return e.has("src")&&this.requireComporess&&this.src&&Me(this.src).then(t=>this.blobSrc=t),!0}connectedCallback(){super.connectedCallback(),this.loading==="eager"&&this.onObserved()}render(){return n`<i ${k(this.el$)} class="${T({loaded:this.firstLoaded,err:this.err,empty:this.empty,stop:this.stop})}">${m(this.isResizableSrc?this.uriset:this.uri,()=>n`<img class="${T({invisible:!this.firstLoaded,"opacity-0":!this.firstLoaded})}" src="${E(this.uri)}" srcset="${E(this.uriset)}" sizes="${E(this.autoSizes)}" @load="${this.onLoad}" @error="${this.onError}">`)}</i>`}};u([l({type:String,attribute:!0})],h.prototype,"src",2);u([l({type:Boolean})],h.prototype,"loaded",2);u([l({type:Boolean})],h.prototype,"stop",2);u([l({type:String})],h.prototype,"loading",2);u([l({type:String})],h.prototype,"sizes",2);u([p()],h.prototype,"w",2);u([p()],h.prototype,"firstLoaded",2);u([p()],h.prototype,"imgLoaded",2);u([p()],h.prototype,"err",2);u([p()],h.prototype,"show",2);u([p()],h.prototype,"blobSrc",2);h=u([w("img-loader")],h);var Ee=Object.defineProperty,Ae=Object.getOwnPropertyDescriptor,j=(e,t,s,o)=>{for(var i=o>1?void 0:o?Ae(t,s):t,a=e.length-1,r;a>=0;a--)(r=e[a])&&(i=(o?r(t,s,i):r(i))||i);return o&&i&&Ee(t,s,i),i};let O=class extends f(""){constructor(){super(...arguments),this.el$=N(),this.autoplay=!1,this.playing=!1,this.oncontextmenu=e=>{e.preventDefault(),e.stopImmediatePropagation()},this.onplay=e=>{console.log("play")},this.onpause=e=>{console.log("pause")},this.play=async()=>{var e;await 0,(e=this.el$.value)==null||e.play()},this.stop=async()=>{var e;await 0,(e=this.el$.value)==null||e.pause()}}connectedCallback(){super.connectedCallback()}render(){return n`<video ${k(this.el$)} class="w-full h-full" src="${this.src}" @play="${this.onplay}" @pause="${this.onpause}" @contextmenu="${this.oncontextmenu}" muted ?autoplay="${this.autoplay}" ?controls="${this.autoplay}" ?poster="${this.poster}" loop webkit-playsinline playsinline controlslist="nodownload" preload="metadata" disablepictureinpicture></video>`}};j([l({type:String})],O.prototype,"poster",2);j([l({type:String})],O.prototype,"src",2);j([l({type:Boolean})],O.prototype,"autoplay",2);j([p()],O.prototype,"playing",2);O=j([w("dui-video")],O);var qe=Object.defineProperty,He=Object.getOwnPropertyDescriptor,L=(e,t,s,o)=>{for(var i=o>1?void 0:o?He(t,s):t,a=e.length-1,r;a>=0;a--)(r=e[a])&&(i=(o?r(t,s,i):r(i))||i);return o&&i&&qe(t,s,i),i};let D=class extends f(""){constructor(){super(...arguments),this.el$=N(),this.autoplay=!1,this.playing=!1,this.oncontextmenu=e=>{e.preventDefault(),e.stopImmediatePropagation()},this.onplay=e=>{console.log("play")},this.onpause=e=>{console.log("pause")},this.play=async()=>{var e;await 0,(e=this.el$.value)==null||e.play()},this.stop=async()=>{var e;await 0,(e=this.el$.value)==null||e.pause()}}connectedCallback(){super.connectedCallback()}render(){return n`<audio ${k(this.el$)} class="w-full h-full" src="${this.src}" @play="${this.onplay}" @pause="${this.onpause}" @contextmenu="${this.oncontextmenu}" muted ?autoplay="${this.autoplay}" ?controls="${this.autoplay}" ?poster="${this.poster}" loop webkit-playsinline playsinline controlslist="nodownload" preload="metadata" disablepictureinpicture></audio>`}};L([l({type:String})],D.prototype,"poster",2);L([l({type:String})],D.prototype,"src",2);L([l({type:Boolean})],D.prototype,"autoplay",2);L([p()],D.prototype,"playing",2);D=L([w("dui-audio")],D);const Ve=`.play-btn{--tw-text-opacity: 1;color:rgba(255,255,255,var(--tw-text-opacity));background:rgba(159,159,159,.4);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}
`;var Ze=Object.defineProperty,Qe=Object.getOwnPropertyDescriptor,x=(e,t,s,o)=>{for(var i=o>1?void 0:o?Qe(t,s):t,a=e.length-1,r;a>=0;a--)(r=e[a])&&(i=(o?r(t,s,i):r(i))||i);return o&&i&&Ze(t,s,i),i};let b=class extends f(Ve){constructor(){super(...arguments),this.el$=N(),this.class="",this.autoplay=!1,this.playing=!1,this.updateMediaType=async()=>{var e,t;!this.mediaType&&this.raw&&(this.mediaType=(t=(e=this.meta)==null?void 0:e.mediaType)!=null?t:await je(this.raw))},this.play=async()=>{var t;const e=this.playing?"stop":"play";this.playing=!this.playing,await 0,(t=this.el$.value)==null||t[e]()}}get poster(){var e;return((e=this.meta)==null?void 0:e.image)||this.src}get raw(){var e;return((e=this.meta)==null?void 0:e.raw)||this.src}get showPoster(){return!this.autoplay&&(this.mediaType!==_.video||!this.playing)||[_.image,_.audio].includes(this.mediaType)}get showPlay(){return!this.autoplay||[_.image,_.audio].includes(this.mediaType)}get showRaw(){return this.autoplay||this.playing}shouldUpdate(e){return(e.has("meta")||e.has("src"))&&this.updateMediaType(),!0}connectedCallback(){super.connectedCallback(),this.updateMediaType()}render(){return n`<div class="media-player w-full h-full mx-auto relative ${T(this.$c([this.class]))}">${m(this.showPoster,()=>n`<img-loader class="poster w-full h-full" src="${this.poster}" loading="lazy"></img-loader>`)} ${m(this.showRaw,()=>n`${_e(this.mediaType,[["audio",()=>n`<dui-audio ${k(this.el$)} src="${this.raw}" ?autoplay="${this.autoplay}"></dui-audio>`],["image",()=>n``],["threed",()=>n``],["video",()=>n`<dui-video ${k(this.el$)} src="${this.raw}" ?autoplay="${this.autoplay}"></dui-video>`]])}`)} ${m(this.showPlay,()=>n`<div class="play-btn flex justify-center items-center w-8 h-8 right-2 bottom-2 absolute z-10 bg-black text-2xl rounded-full" @click="${this.play}"><i class="mdi ${T(this.$c([this.playing?"mdi-pause":"mdi-play"]))}"></i></div>`)}</div>`}};x([l({type:String})],b.prototype,"class",2);x([l({type:Object})],b.prototype,"meta",2);x([l({type:String})],b.prototype,"src",2);x([l({type:Boolean})],b.prototype,"autoplay",2);x([p()],b.prototype,"playing",2);x([p()],b.prototype,"mediaType",2);b=x([w("dui-media-player")],b);const Fe=`.skeleton{display:inline-flex;height:100%;width:100%;flex-direction:column;gap:1rem}.p{height:100%;width:6rem;overflow:hidden;border-radius:.375rem;height:1em;background:rgba(222,226,230)}.p:after{content:"";display:block;height:100%;width:100%;background:linear-gradient(90deg,rgba(255,255,255,0) 8%,rgba(255,255,255,.8) 36%,rgba(255,255,255,0) 66%) 0% 0% / 1200px;animation:skeleton 3s ease-in-out infinite}.p:nth-child(2){width:9rem}.p:nth-child(3){width:12rem}@keyframes skeleton{0%{background-position:-1200px 0}to{background-position:1200px 0}}
`;var Ge=Object.defineProperty,Je=Object.getOwnPropertyDescriptor,R=(e,t,s,o)=>{for(var i=o>1?void 0:o?Je(t,s):t,a=e.length-1,r;a>=0;a--)(r=e[a])&&(i=(o?r(t,s,i):r(i))||i);return o&&i&&Ge(t,s,i),i};let C=class extends f(Fe){constructor(){super(...arguments),this.expect=!1,this.num=1,this.class=""}get groups(){return new Array(this.num)}render(){return this.expect?n`<slot></slot>`:n`<div class="skeleton ${T(this.$c([this.class]))}">${ae(this.groups,()=>n`<div class="p"></div>`)}</div>`}};R([l({type:Boolean})],C.prototype,"expect",2);R([l({type:Number})],C.prototype,"num",2);R([l({type:String})],C.prototype,"class",2);C=R([w("loading-skeleton")],C);const Ke=`.item{min-height:11rem}
`;var Xe=Object.defineProperty,Ye=Object.getOwnPropertyDescriptor,z=(e,t,s,o)=>{for(var i=o>1?void 0:o?Ye(t,s):t,a=e.length-1,r;a>=0;a--)(r=e[a])&&(i=(o?r(t,s,i):r(i))||i);return o&&i&&Xe(t,s,i),i};let P=class extends F(f(Ke)){constructor(){super(...arguments),this.item={},this.cook=async()=>{this.meta=await Ie(this.item),this.cooked=await ve({DOIDName:this.doid,token:this.token})},this.onObserved=()=>{this.cook()},this.goto=()=>{this.cookedUri&&be(`/collection/${this.cookedUri}`)}}get doid(){var e;return(e=this.DOID)==null?void 0:e.doid}get createTime(){return this.item.ctime?new Date(this.item.ctime).toLocaleString():""}get token(){var t;const{tokenID:e}=this.item;return{name:(t=this.meta)==null?void 0:t.name,tokenID:e}}get cookedName(){var e,t;return(t=(e=this.cooked)==null?void 0:e.parsed)==null?void 0:t.val}get cookedUri(){var e,t;return(t=(e=this.cooked)==null?void 0:e.parsed)==null?void 0:t.uri}get tokenName(){var e,t;return(t=(e=this.cooked)==null?void 0:e.parsed)==null?void 0:t.val}connectedCallback(){super.connectedCallback()}render(){var e,t,s,o,i;return n`<div class="item p-4"><div class="font-medium"><loading-skeleton .expect="${(e=this.meta)==null?void 0:e.name}"><dui-link class="uri" href="${`/collection/${this.cookedUri}`}">${this.cookedUri}</dui-link></loading-skeleton></div><div class="flex gap-4 py-4"><div class="shrink-0 w-24 h-24"><dui-media-player .meta="${this.meta}"></dui-media-player></div><div><loading-skeleton .expect="${(t=this.meta)==null?void 0:t.name}" num="3"><div class="mb-2 flex items-center"><dui-link class="text-base" href="${`/collection/${this.cookedUri}`}">${(s=this.meta)==null?void 0:s.name}<i class="mdi mdi-ethereum ml-1"></i></dui-link></div><p class="break-words break-all text-xs lg_text-sm text-gray-500">${(o=this.meta)==null?void 0:o.description}</p></loading-skeleton></div></div><div class="text-xs">Minted on ${this.createTime}, Owned by ${m((i=this.item.doids)==null?void 0:i.length,()=>{var a,r;return n`${(r=(a=this.item.doids)==null?void 0:a.at(0))==null?void 0:r.name}`},()=>n`<dui-address .address="${this.item.owner}"></dui-address>`)}</div></div>`}};z([l()],P.prototype,"DOID",2);z([l()],P.prototype,"item",2);z([p()],P.prototype,"cooked",2);z([p()],P.prototype,"meta",2);P=z([w("doid-coll-item")],P);const We=`:host::part(inner){display:flex;height:2rem;width:100%;align-items:center;justify-content:center}@media (min-width: 1024px){:host::part(inner){height:2.5rem}}
`;var et=Object.defineProperty,tt=Object.getOwnPropertyDescriptor,$=(e,t,s,o)=>{for(var i=o>1?void 0:o?tt(t,s):t,a=e.length-1,r;a>=0;a--)(r=e[a])&&(i=(o?r(t,s,i):r(i))||i);return o&&i&&et(t,s,i),i};let g=class extends F(f(We),{persistent:!0,rootMargin:"30px"}){constructor(){super(...arguments),this.pageSize=5,this.page=1,this.mode="scroll",this.pending=!1,this.firstLoad=!0,this.empty=!1,this.nomore=!1,this.class="",this.onObserved=()=>{this.scrollMode&&this.loadmore()}}get canLoad(){return!this.pending&&!this.nomore&&!this.empty&&!this.firstLoad}get scrollMode(){return this.mode==="scroll"}loadmore(){if(!this.canLoad)return;const{pageSize:e,page:t,mode:s}=this;this.emit("loadmore",{pageSize:e,page:t,mode:s})}connectedCallback(){super.connectedCallback()}render(){return n`<div class="dui-pagination w-full flex justify-center items-center mt-4 ${T(this.$c([{nomore:this.nomore,"pointer-events-none":!this.canLoad},this.class]))}"><div part="inner" @click="${this.loadmore}">${m(this.empty,()=>n`<slot name="empty"></slot>`,()=>n`${m(this.nomore,()=>n`<slot name="nomore"></slot>`,()=>n`${m(this.pending,()=>n`<slot name="loading"><loading-icon type="block"></loading-icon></slot>`,()=>n`${m(!this.scrollMode&&!this.firstLoad,()=>n`<slot><dui-link>Load more</dui-link></slot>`)}`)}`)}`)}</div></div>`}};$([l({type:Number})],g.prototype,"pageSize",2);$([l({type:Number})],g.prototype,"page",2);$([l()],g.prototype,"mode",2);$([l()],g.prototype,"pending",2);$([l({type:Boolean})],g.prototype,"firstLoad",2);$([l({type:Boolean})],g.prototype,"empty",2);$([l({type:Boolean})],g.prototype,"nomore",2);$([l()],g.prototype,"class",2);g=$([w("dui-pagination")],g);const it="";var st=Object.defineProperty,ot=Object.getOwnPropertyDescriptor,v=(e,t,s,o)=>{for(var i=o>1?void 0:o?ot(t,s):t,a=e.length-1,r;a>=0;a--)(r=e[a])&&(i=(o?r(t,s,i):r(i))||i);return o&&i&&st(t,s,i),i};let y=class extends f(it){constructor(){super(...arguments),this.pending=!1,this.err="",this.ts=0,this.collections=[],this.nomore=!1,this.page=1,this.pageSize=5,this.loadmore=()=>{this.page++,this.getCollections()}}get doid(){var e;return(e=this.DOID)==null?void 0:e.doid}get empty(){return!this.err&&!!this.doid&&!!this.ts&&!this.collections.length}get pagination(){return{page:this.page,pageSize:this.pageSize}}async getCollections(){if(this.pending)return;const{owner:e=""}=await xe(this.doid);if(e){this.pending=!0,this.err="";try{const t=await re({minter:e,doid:this.doid},this.pagination);this.collections.push(...t),this.nomore=t.length<this.pageSize}catch(t){this.err=t.message||t}finally{this.ts++,this.pending=!1}}}connectedCallback(){super.connectedCallback(),this.getCollections()}render(){return n`<div class="doid-collections">${m(this.err,()=>n`${this.err}`)} ${m(this.collections.length,()=>n`<div class="grid gap-4">${ae(this.collections,e=>n`${Te(e,n`<div class="bg-gray-100 break-words break-all rounded-md"><doid-coll-item .DOID="${this.DOID}" .item="${e}"></doid-coll-item></div>`)}`)}</div>`)} ${m(!this.err,()=>n`<dui-pagination .pending="${this.pending}" .nomore="${this.nomore}" .firstLoad="${!this.ts}" .empty="${this.empty}" .pageSize="${this.pageSize}" .page="${this.page}" @loadmore="${this.loadmore}"><span slot="empty">No collection yet.</span></dui-pagination>`)}</div>`}};v([l()],y.prototype,"DOID",2);v([p()],y.prototype,"pending",2);v([p()],y.prototype,"err",2);v([p()],y.prototype,"ts",2);v([p()],y.prototype,"collections",2);v([p()],y.prototype,"nomore",2);v([p()],y.prototype,"page",2);v([p()],y.prototype,"pageSize",2);y=v([w("doid-collections")],y);export{ze as a,lt as b,Ie as g,nt as q};
